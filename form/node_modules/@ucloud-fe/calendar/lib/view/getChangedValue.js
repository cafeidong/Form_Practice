"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

// 获取指定月份有多少天
var getDays = function getDays(year, month) {
  var days = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];

  if (year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0)) {
    days[1] = 29;
  }

  return days[month];
};

var _default = function _default(v, current, value) {
  var currentDate = new Date(value == null ? current : value);
  var currentMonth = currentDate.getMonth();
  var result = new Date(currentDate);
  var year = v.year,
      _v$month = v.month,
      month = _v$month === void 0 ? currentMonth : _v$month,
      date = v.date;
  if (year != null) result.setFullYear(year);

  if (getDays(currentDate.getFullYear(), currentMonth) > getDays(result.getFullYear(), month)) {
    // 当前月的天数大于更新月的天数，先更新天再更新月
    if (date != null) result.setDate(date);
    result.setMonth(month);
  } else {
    result.setMonth(month);
    if (date != null) result.setDate(date);
  }

  return result;
};

exports.default = _default;